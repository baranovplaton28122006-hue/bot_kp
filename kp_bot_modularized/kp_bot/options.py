"""
options.py

Справочники и словари с вариантами ответов, лейблами, а также функции humanize для представления данных.
(Файл аннотирован автоматически; логика не изменена.)
"""


from typing import List
A1_LANDING = [
    ("hero",      "Главный экран (заголовок)"),
    ("benefits",  "Преимущества / Почему мы"),
    ("contact",   "Форма связи / Контакты"),
    ("gallery",   "Галерея / Портфолио"),
    ("about",     "О нас / О компании"),
    ("products",  "Услуги / продукты"),
    ("reviews",   "Отзывы клиентов"),
]
A1_CORP = [
    ("services",  "Услуги (или каталог услуг)"),
    ("faq",       "FAQ (вопросы и ответы)"),
    ("cases",     "Портфолио / Кейсы"),
    ("prices",    "Цены / Прайс-лист"),
    ("home",      "Главная страница"),
    ("blog",      "Блог / Новости"),
    ("about",     "О компании"),
    ("contacts",  "Контакты"),
    ("team",      "Команда"),
]
A2_FUNCTIONS = [
    ("booking",   "Онлайн-запись / бронирование"),
    ("social",    "Интеграция с соцсетями"),
    ("lk",        "Личный кабинет клиента"),
    ("form",      "Форма обратной связи"),
    ("chat",      "Чат с менеджером"),
]

B1_SECTIONS = [
    ("pdp",       "Страница товара (описание/фото/цена)"),
    ("reviews",   "Отзывы о товарах или магазине"),
    ("home",      "Витрина с акциями/новинками"),
    ("lk",        "Личный кабинет покупателя"),
    ("faq",       "FAQ (вопросы и ответы)"),
    ("about",     "О компании / О нас"),
    ("delivery",  "Доставка и оплата"),
    ("catalog",   "Каталог товаров"),
    ("blog",      "Блог / Статьи"),
    ("contacts",  "Контакты"),
    ("home",      "Главная"),
    ("cart",      "Корзина"),
]
B2_ASSORT = [
    ("m",         "Около 100–200 товаров"),
    ("l",         "Более 200 товаров"),
    ("s",         "До 50 товаров"),
    ("unknown",   "Пока не знаю"),
]
B3_FUNCTIONS = [
    ("fast",      "Оформление заказа в 1 клик"),
    ("filters",   "Фильтры и поиск по товарам"),
    ("lk",        "Личный кабинет покупателя"),
    ("ratings",   "Отзывы и рейтинги"),
    ("compare",   "Сравнение товаров"),
]

C1_TASKS = [
    ("booking_msg",    "Бронирование в мессенджере"),
    ("faq",            "Ответы на вопросы (FAQ)"),
    ("tracking",       "Отслеживание доставки"),
    ("selection",      "Подбор товара / услуг"),
    ("subs_base",      "Сбор базы подписчиков"),
    ("promo",          "Проведение акций"),
    ("record_service", "Запись на услугу"),
    ("record_visit",   "Запись на приём"),
    ("orders",         "Приём заказов"),
    ("status",         "Статус заказа"),
    ("consult",        "Консультации"),
]
C2_PLATFORMS = [
    ("site",           "Сайт (виджет чат-бота)"),
    ("vk",             "ВКонтакте"),
    ("wa",             "WhatsApp"),
    ("tg",             "Telegram"),
    ("vb",             "Viber"),
]
C3_INTEGR = [
    ("crm",      "Интеграция с CRM"),
    ("delivery", "Службы доставки / трекинг"),
    ("db",       "Подключение к базе данных"),
    ("pay",      "Платежные системы"),
    ("ga",       "Подключение аналитики"),
    ("mess",     "Чат или мессенджеры"),
    ("ml",       "Многоязычность"),
]

D1_GOALS = [
    ("audit",          "Понять, что не работает в текущем продвижении (аудит)"),
    ("leads",          "Увеличить поток заявок и продаж (лиды)"),
    ("strategy",       "Разработать долгосрочную стратегию"),
    ("ads_setup",      "Настройка рекламы (Яндекс/Google)"),
    ("brand",          "Повысить узнаваемость бренда"),
    ("seo",            "SEO: улучшить позиции сайта"),
    ("leads",          "Увеличить продажи"),
    ("social",         "Развитие соцсетей"),
    ("ads_manage",     "Ведение рекламы"),
]
D2_CHANNELS = [
    ("seo",                 "Поисковая оптимизация (SEO)"),
    ("ads",                 "Контекстная реклама"),
    ("content_marketing",   "Контент-маркетинг"),
    ("target",              "Таргет в соцсетях"),
    ("email",               "Email-рассылки"),
    ("articles",            "Статьи"),
    ("blog",                "Блог"),
]
D3_CURRENT = [
    ("ads_no_result",       "Есть сайт/реклама(нерезультативно)"),
    ("nothing",             "Ничего нет, начинаем с нуля"),
    ("site_no_ads",         "Есть сайт, но нет рекламы"),
    ("no_site_social",      "Нет сайта, нужна реклама"),
]
D4_BUDGET = [
    ("lt50",                "До 50 000 ₽/мес"),
    ("50-100",              "50 000–100 000 ₽/мес"),
    ("gt100",               "Более 100 000 ₽/мес"),
    ("advise",              "Предложите оптимальный вариант"),
]

DESIGN = [
    ("tpl",            "Готовый шаблон"),
    ("uniq",           "Уникальный дизайн"),
    ("advise",         "Посоветуйте оптимальный вариант")
]
CONTENT = [
    ("client",        "Вы предоставите готовый контент"),
    ("help",          "Помощь с созданием контента"),
    ("mix",           "Смешанный вариант")
]

# [auto]: функция _optmap()
def _optmap(options):
    return {k: v for k, v in options}

LABELS = {
    "A1_blocks": (_optmap(A1_LANDING) | _optmap(A1_CORP)),
    "A2_functions": _optmap(A2_FUNCTIONS),
    "B1_sections": _optmap(B1_SECTIONS),
    "B2_assort": _optmap(B2_ASSORT),
    "B3_functions": _optmap(B3_FUNCTIONS),
    "C1_tasks": _optmap(C1_TASKS),
    "C2_platforms": _optmap(C2_PLATFORMS),
    "C3_integrations": _optmap(C3_INTEGR),
    "D4_budget": {
        "lt50": "До 50 000 ₽/мес",
        "50-100": "50 000–100 000 ₽/мес",
        "gt100": "Более 100 000 ₽/мес",
        "advise": "Предложите оптимальный вариант",
    },
    "design": _optmap(DESIGN),
    "content": _optmap(CONTENT),
    "timeline": {
        "1-2w": "1–2 недели",
        "2-4w": "2–4 недели",
        "1-2m": "1–2 месяца",
        "2-4m": "2–4 месяца",
    },
}

# [auto]: функция humanize_list()
def humanize_list(step: str, keys: list[str]) -> list[str]:
    mp = LABELS.get(step, {})
    return [mp.get(k, k) for k in (keys or [])]

# [auto]: функция humanize_dict()
def humanize_dict(step: str, dct: dict | None) -> str:
    if not dct:
        return ""
    items = humanize_list(step, dct.get("items", []))
    if dct.get("other"):
        items.append(f"Другое: {dct['other']}")
    return "<br>• " + "<br>• ".join(items) if items else ""